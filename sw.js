const cacheName='atwa-post-v7';const itemsToBeCached=['./index.html','./projects.html','./blog/index.html','./blog/js/articles.js','./blog/js/main.js','./blog/css/article.css','./js/main.js','./js/projects.js','./js/projects_main.js','./js/manifest.json','./css/styles.css','./img/github.png','./img/linked.png','./img/twitter.svg','./img/send.svg','./img/projects/tability_screenshot.png','./img/projects/meet_treat.png','./img/projects/reviews.png','./img/personal_image.jpg','./img/certification.svg','./img/loading.jpg','./img/favicon.ico','./img/logo.png','https://fonts.googleapis.com/css?family=Anonymous+Pro']
self.addEventListener('install',event=>{event.waitUntil(caches.open(cacheName).then(cache=>{return cache.addAll(itemsToBeCached)}))});self.addEventListener('activate',event=>{event.waitUntil(caches.keys().then(keys=>{return Promise.all(keys.map(key=>{if(key!==cacheName)caches.delete(key)}))}).catch(err=>console.error(err)))});self.addEventListener('fetch',event=>{event.respondWith(caches.open(cacheName).then(cache=>{const url=new URL(event.request.url);const searchKey=(url.pathname==='/')?'index.html':url.pathname.slice(1);return cache.match(searchKey).then(cacheResp=>{if(cacheResp)return cacheResp;if(url.hostname==='localhost'||url.hostname==='atwamahmoud.github.io'){return fetch(event.request).then(networkResp=>{cache.put(event.request.url,networkResp.clone());return networkResp})}else{return fetch(event.request)}})}))});self.addEventListener('sync',event=>{if(event.tag==='outbox'){event.waitUntil(caches.open('outbox').then(cache=>{cache.match('https://personal-app-5239.herokuapp.com/verify').then(msg=>msg.json()).then(msg=>{console.log(msg);return fetch('https://personal-app-5239.herokuapp.com/verify',{method:'POST',body:JSON.stringify(msg)})}).then(resp=>resp.json()).then(resp=>{clients.matchAll({includeUncontrolled:!0}).then(clients=>{for(const client of clients){client.postMessage(resp)}})})}))}})